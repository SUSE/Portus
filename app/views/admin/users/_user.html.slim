tr[id="user_#{user.id}"]
  - if user == current_user
    td= user.display_username
  - else
    td
      = link_to user.display_username, edit_admin_user_path(user), { title: "Edit user '#{user.display_username}'" }
  td= user.email
  td.admin-btn
    - if current_user.id == user.id
      i.fa.fa-lg[class="fa-toggle-#{user.admin? ? 'on': 'off'}"]
    - else
      a[class="btn btn-default"
        data-remote="true"
        data-method="put"
        rel="nofollow"
        href=url_for(toggle_admin_admin_user_path(user))]
          i.fa.fa-lg[class="fa-toggle-#{user.admin? ? 'on': 'off'}"]

  td= user.teams.reduce(0) { |sum, t| sum += t.namespaces.count}
  td= user.teams.all_non_special.count
  td.enabled-btn
    - if current_user.id == user.id && @admin_count == 1
      i.fa.fa-lg.fa-toggle-on
    - else
      a[class="btn btn-default"
        data-remote="true"
        data-method="put"
        rel="nofollow"
        href=url_for(toggle_enabled_path(user))]
          i.fa.fa-lg[class="fa-toggle-#{user.enabled? ? 'on': 'off'}"]
  td.remove-btn
    - if current_user == user
        a[class="btn btn-default" disabled=true]
          i.fa.fa-trash.fa-lg
    - else
        a[class="btn btn-default"
            data-placement="left"
            data-toggle="popover"
            data-title="Please confirm"
            data-content='<p>Are you sure you want to remove this user?</p><a class="btn btn-default">No</a> <a class="btn btn-primary btn-confirm-remove" data-method="delete" rel="nofollow" href="#{admin_user_path(user)}">Yes</a>'
            data-html="true"
            tabindex="0"
            role="button"
        ]
          i.fa.fa-trash.fa-lg
